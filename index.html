<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HiveAI | Simulador de ROI Enterprise</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --brand-dark: #0B0E14;
            --brand-navy: #0F172A;
            --brand-cyan: #00D1FF;
            --card-bg: rgba(22, 27, 34, 0.7);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--brand-dark);
            color: #F8FAFC;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        .chart-container {
            position: relative;
            width: 100%;
            height: 380px;
            max-height: 400px;
        }

        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            height: 6px;
            border-radius: 10px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: var(--brand-cyan);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(0, 209, 255, 0.5);
            transition: all 0.2s ease;
        }

        .premium-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 24px;
        }

        .honeycomb-pattern {
            background-image: radial-gradient(circle at 2px 2px, rgba(255, 255, 255, 0.02) 1px, transparent 0);
            background-size: 24px 24px;
        }

        .text-gradient {
            background: linear-gradient(135deg, #FFF 0%, #00D1FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="honeycomb-pattern min-h-screen pb-20">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            // State con valores iniciales ajustados: 2 agentes, $400 salario
            const [numAgents, setNumAgents] = useState(2);
            const [avgSalary, setAvgSalary] = useState(400);
            const [physicalInfrCost, setPhysicalInfrCost] = useState(200);
            const [attritionRate, setAttritionRate] = useState(20);
            const [trainingCost, setTrainingCost] = useState(800);
            
            const [hoursSpokenPerDay, setHoursSpokenPerDay] = useState(4.5);
            const [aiCostPerHour, setAiCostPerHour] = useState(9.00); 
            const [implementationFee, setImplementationFee] = useState(4000);

            const [results, setResults] = useState({
                humanMonthly: 0,
                aiMonthly: 0,
                savingsYear1: 0,
                payback: 0,
                totalHours: 0,
                efficiency: 0
            });

            const chartInstance = useRef(null);
            const WORKING_DAYS = 20;

            useEffect(() => {
                // Cálculo Humano (Costo Fijo Mensual)
                const monthlySalary = numAgents * avgSalary;
                const monthlyInfra = numAgents * physicalInfrCost;
                const monthlyAttrition = (numAgents * (attritionRate / 100) * trainingCost) / 12;
                const totalHuman = monthlySalary + monthlyInfra + monthlyAttrition;

                // Cálculo AI (Costo Variable Efectivo)
                const totalHoursMonth = numAgents * hoursSpokenPerDay * WORKING_DAYS;
                const totalAiMonthly = totalHoursMonth * aiCostPerHour;

                const savingsYear1 = (totalHuman * 12) - ((totalAiMonthly * 12) + implementationFee);
                const monthlySavings = totalHuman - totalAiMonthly;
                const payback = monthlySavings > 0 ? implementationFee / monthlySavings : 0;
                const efficiency = totalHuman > 0 ? ((totalHuman - totalAiMonthly) / totalHuman) * 100 : 0;

                setResults({
                    humanMonthly: totalHuman,
                    aiMonthly: totalAiMonthly,
                    savingsYear1: savingsYear1,
                    payback: payback,
                    totalHours: totalHoursMonth,
                    efficiency: efficiency
                });

                if (chartInstance.current) chartInstance.current.destroy();
                const ctx = document.getElementById('mainChart').getContext('2d');
                chartInstance.current = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Costos Humanos', 'HiveAI Virtuals'],
                        datasets: [{
                            data: [totalHuman, totalAiMonthly],
                            backgroundColor: (context) => {
                                const ctx = context.chart.ctx;
                                const g1 = ctx.createLinearGradient(0, 0, 0, 400);
                                g1.addColorStop(0, 'rgba(255, 255, 255, 0.1)');
                                g1.addColorStop(1, 'rgba(255, 255, 255, 0.02)');
                                const g2 = ctx.createLinearGradient(0, 0, 0, 400);
                                g2.addColorStop(0, '#00D1FF');
                                g2.addColorStop(1, '#0084FF');
                                return [g1, g2];
                            },
                            borderRadius: 16,
                            barThickness: 70
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: '#1E293B',
                                titleFont: { weight: 'bold' },
                                callbacks: {
                                    label: (i) => ` Costo: $${Math.round(i.raw).toLocaleString()}`
                                }
                            }
                        },
                        scales: {
                            y: { grid: { color: 'rgba(255, 255, 255, 0.05)' }, ticks: { color: '#64748B' } },
                            x: { grid: { display: false }, ticks: { color: '#FFF' } }
                        }
                    }
                });

                if (window.lucide) lucide.createIcons();
            }, [numAgents, avgSalary, physicalInfrCost, attritionRate, trainingCost, hoursSpokenPerDay, aiCostPerHour, implementationFee]);

            const fmt = (v) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(v);

            const handleRequestDemo = () => {
                window.location.href = "mailto:comercial@hiveai.solutions";
            };

            return (
                <div className="container mx-auto px-4 md:px-12 pt-12">
                    
                    {/* Header Section */}
                    <div className="flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-8">
                        <div>
                            <div className="flex items-center gap-2 mb-4">
                                <div className="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center">
                                    <i data-lucide="layers" className="text-white" size="18"></i>
                                </div>
                                <span className="text-xl font-black tracking-tighter uppercase tracking-[0.3em]">HIVEAI</span>
                            </div>
                            <h1 className="text-5xl font-extrabold text-gradient leading-tight">Proyección de Ahorro Operativo</h1>
                            <p className="text-slate-400 mt-3 text-xl font-light">Basado en un modelo de facturación por tiempo efectivo de llamada.</p>
                        </div>
                        <div className="premium-card px-10 py-6 border-l-4 border-l-[#00D1FF] shadow-2xl">
                            <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1">Ahorro Neto Año 1</span>
                            <span className="text-4xl font-black text-white">{fmt(results.savingsYear1)}</span>
                        </div>
                    </div>

                    {/* KPI Row */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12">
                        <KPICard title="Retorno" value={`${results.payback.toFixed(1)} m`} sub="Break-even" icon="trending-down" />
                        <KPICard title="Eficiencia Real" value={`${results.efficiency.toFixed(0)}%`} sub="Ahorro Operativo" icon="zap" highlight />
                        <KPICard title="Horas Facturadas" value={`${Math.round(results.totalHours)}h`} sub="Uso Mensual" icon="clock" />
                        <KPICard title="Costo/Hora AI" value={fmt(aiCostPerHour)} sub="Tarifa Plana" icon="bar-chart" />
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-10">
                        
                        {/* Control Panel */}
                        <div className="lg:col-span-4 space-y-8">
                            <div className="premium-card p-8">
                                <h2 className="text-xs font-black text-[#00D1FF] uppercase tracking-[0.25em] mb-10 flex items-center gap-2">
                                    <i data-lucide="user-check" size="14"></i> Factores Humanos (Fijos)
                                </h2>
                                <div className="space-y-10">
                                    <InputBlock label="Nº de Agentes" val={numAgents} set={setNumAgents} min={1} max={200} unit=" PAX" />
                                    <InputBlock label="Salario + Beneficios" val={avgSalary} set={setAvgSalary} min={100} max={8000} step={50} unit=" $" />
                                    <InputBlock label="Infraestructura / Mes" val={physicalInfrCost} set={setPhysicalInfrCost} min={0} max={1000} unit=" $" />
                                </div>
                            </div>

                            <div className="premium-card p-8 bg-[#00D1FF]/5 border-[#00D1FF]/10">
                                <h2 className="text-xs font-black text-[#00D1FF] uppercase tracking-[0.25em] mb-10 flex items-center gap-2">
                                    <i data-lucide="phone-call" size="14"></i> Consumo HiveAI (Variable)
                                </h2>
                                <div className="space-y-10">
                                    <InputBlock 
                                        label="Horas habladas / día" 
                                        val={hoursSpokenPerDay} 
                                        set={setHoursSpokenPerDay} 
                                        min={0.5} max={12} step={0.5} 
                                        unit=" h/agente" 
                                    />
                                    <InputBlock label="Costo por Hora" val={aiCostPerHour} set={setAiCostPerHour} min={1} max={50} step={0.5} unit=" $/h" />
                                </div>
                                <div className="mt-8 pt-6 border-t border-white/5 text-[10px] text-slate-500 uppercase tracking-widest text-center">
                                    Cálculo basado en 20 días laborales/mes
                                </div>
                            </div>
                        </div>

                        {/* Analysis Workspace */}
                        <div className="lg:col-span-8 space-y-8">
                            <div className="premium-card p-10">
                                <div className="flex justify-between items-center mb-12">
                                    <div>
                                        <h3 className="text-2xl font-bold">Análisis Comparativo Mensual</h3>
                                        <p className="text-sm text-slate-500 mt-1">Comparativa entre costos de estructura fijos vs. modelo variable HiveAI.</p>
                                    </div>
                                    <div className="hidden md:flex gap-6">
                                        <LegendItem label="Estructura Tradicional" color="rgba(255,255,255,0.1)" />
                                        <LegendItem label="HiveAI Billing" color="#00D1FF" />
                                    </div>
                                </div>
                                <div className="chart-container">
                                    <canvas id="mainChart"></canvas>
                                </div>

                                <div className="mt-12 grid grid-cols-1 md:grid-cols-2 gap-10 border-t border-white/5 pt-12">
                                    <Insight icon="shield" title="Pago por Uso Real" text="A diferencia del modelo humano, HiveAI factura únicamente por los minutos de conexión efectiva, eliminando el gasto por tiempos muertos." />
                                    <Insight icon="refresh-cw" title="Inversión Amortizada" text={`Con un fee de ${fmt(implementationFee)}, el retorno se completa en ${results.payback.toFixed(1)} meses gracias a la reducción inmediata de OPEX.`} />
                                </div>
                            </div>

                            {/* CTA Box con funcionalidad mailto */}
                            <div className="bg-gradient-to-br from-[#00D1FF] to-[#0055FF] rounded-[32px] p-12 flex flex-col md:flex-row justify-between items-center gap-10 shadow-2xl">
                                <div className="text-center md:text-left">
                                    <h4 className="text-3xl font-black text-white leading-tight">Optimice su inversión operativa hoy mismo</h4>
                                    <p className="text-white/80 font-medium mt-2 italic text-lg">"Sincronización perfecta. Eficiencia infinita."</p>
                                </div>
                                <button 
                                    onClick={handleRequestDemo}
                                    className="bg-white text-[#0055FF] hover:bg-slate-50 px-12 py-5 rounded-full font-black tracking-tight transition-all hover:scale-105 active:scale-95 shadow-xl whitespace-nowrap uppercase text-sm"
                                >
                                    SOLICITAR DEMO ENTERPRISE
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            );
        };

        const KPICard = ({ title, value, sub, icon, highlight = false }) => (
            <div className={`premium-card p-6 flex items-center gap-6 border-b-2 ${highlight ? 'border-b-[#00D1FF]' : 'border-b-transparent'}`}>
                <div className={`w-14 h-14 rounded-2xl flex items-center justify-center ${highlight ? 'bg-[#00D1FF]/10 text-[#00D1FF]' : 'bg-slate-800 text-slate-500'}`}>
                    <i data-lucide={icon} size="24"></i>
                </div>
                <div>
                    <span className="text-[10px] font-black text-slate-500 uppercase tracking-widest">{title}</span>
                    <div className="flex items-baseline gap-2">
                        <span className="text-2xl font-black text-white">{value}</span>
                        <span className="text-[10px] text-slate-600 font-bold">{sub}</span>
                    </div>
                </div>
            </div>
        );

        const InputBlock = ({ label, val, set, min, max, step = 1, unit }) => (
            <div className="space-y-4">
                <div className="flex justify-between items-end">
                    <span className="text-[11px] font-black text-slate-500 uppercase tracking-widest">{label}</span>
                    <span className="text-sm font-black text-white bg-white/5 px-3 py-1 rounded-lg border border-white/5">{val}{unit}</span>
                </div>
                <input type="range" min={min} max={max} step={step} value={val} onChange={(e) => set(parseFloat(e.target.value))} />
            </div>
        );

        const LegendItem = ({ label, color }) => (
            <div className="flex items-center gap-2">
                <div className="w-2.5 h-2.5 rounded-full" style={{ background: color }}></div>
                <span className="text-[10px] font-black text-slate-500 uppercase tracking-widest">{label}</span>
            </div>
        );

        const Insight = ({ icon, title, text }) => (
            <div className="flex gap-6">
                <div className="w-12 h-12 rounded-xl bg-slate-800 flex items-center justify-center shrink-0">
                    <i data-lucide={icon} className="text-[#00D1FF]" size="20"></i>
                </div>
                <div>
                    <h4 className="font-black text-white uppercase text-xs tracking-wider mb-2">{title}</h4>
                    <p className="text-sm text-slate-500 leading-relaxed font-light">{text}</p>
                </div>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
